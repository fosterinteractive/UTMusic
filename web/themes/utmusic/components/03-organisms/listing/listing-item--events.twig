{# Set default listing-item class - 'm-listing-item' #}
{% set variation = variation|default('') %}

{% if variation is not empty %}

  {# Add BEM variation '--' prefix if missing #}
  {% if variation starts with '--' %}
    {# Do nothing #}
  {% else %}
    {% set variation = '--' ~ variation %}
  {% endif %} 

{% endif %}

{# {% if sb_demo %}
  {% set directory = directory %}
{% else %}
  {% set directory =  'themes/utmusic' %}
{% endif %} #}

<div class="m-listing-item{{ variation }}{% if image %} has-img{% endif %}">

  <div class="m-listing-item{{ variation }}__event-date">
    <div class="m-listing-item{{ variation }}__event-date-month">
      {{ event_date_month }}
    </div>
    <div class="m-listing-item{{ variation }}__event-date-day">
      {{ event_date_day }}
    </div>
  </div>
  
  <div class="m-listing-item{{ variation }}__content has-img">

    <div class="m-listing-item{{ variation }}__title">
      {% include "@atoms/text/headings/heading.twig" with {
          directory: directory,
          html_element: 'h3',
          appearance: 'h3',
          text: title,
          url: url,          
        } only
      %}
    </div>

    {% if event_date %}
      <div class="m-listing-item{{ variation }}__date">
        {{ event_date }}
      </div>
    {% endif %}

    {# for condensed listing item  #}
    {% if areas %} 
      <div class="m-listing-item{{ variation }}__category">
        {% if price == 'free' %} {{ 'Free:'|t }}{% endif %}
        {% for area in areas %}
          {{ area }}{% if not loop.last %},{% endif %}
        {% endfor %}
      </div>
    {% endif %}

    {% if time_start or location %}
      <div class="m-listing-item{{ variation }}__tags">

        {% include '@atoms/chip/chip.twig' with {
            directory: directory,
            text: time_start,
            variation: 'icon-left',
            icon: 'time',
            html_element: 'div',
          } only 
        %}

        {% include '@atoms/chip/chip.twig' with {
            directory: directory,
            text: location,
            variation: 'icon-left',
            icon: 'location',
            html_element: 'div',
          } only 
        %}

      </div>
    {% endif %}
    
  </div>

  {% if image %}
    <div class="m-listing-item{{ variation }}__img">
      {% include "@molecules/image/image.twig" with {
          image: image,
        } only
      %}
    </div>
  {% endif %}
</div>
